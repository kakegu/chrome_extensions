(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],u=0,p=[];u<i.length;u++)r=i[u],o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},o={app:0},s=[];function r(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"8b907bfe"}[t]+".js"}function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise(function(e,n){a=o[t]=[e,n]});e.push(a[2]=n);var s,l=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(t),s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+n+": "+s+")");r.type=n,r.request=s,a[1](r)}o[t]=void 0}};var u=setTimeout(function(){s({type:"timeout",target:c})},12e4);c.onerror=c.onload=s,l.appendChild(c)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},"1c0b":function(t,e,a){},2:function(t,e){},"22b7":function(t,e,a){"use strict";var n=a("834f"),o=a.n(n);o.a},3:function(t,e){},4:function(t,e){},"411f":function(t,e,a){"use strict";var n=a("a2b0"),o=a.n(n);o.a},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],r=(a("5c0b"),a("2877")),i={},l=Object(r["a"])(i,o,s,!1,null,null,null);l.options.__file="App.vue";var c=l.exports,u=a("8c4f"),d=a("28dd"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{alt:"logo",width:"100",src:a("cf05")}}),n("h1",[t._v("TrustNote Fusion Wallet")]),n("mt-button",{attrs:{type:"primary"},on:{click:t.MakeClicked}},[t._v("Create New Wallet")]),n("p"),n("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("Import Existing Wallet")])],1)},f=[],m={methods:{MakeClicked:function(t){console.log(t),this.$router.push("/create")},ImportClicked:function(t){console.log(t),this.$router.push("/import")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null!=e&&(console.log("privatekey!",e),this.$router.push("/wallet"))}},v=m,h=(a("e553"),Object(r["a"])(v,p,f,!1,null,"0e2cdb1c",null));h.options.__file="Home.vue";var y=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Please write down your mnemonic on a piece of paper")]),a("p",[t._v(t._s(t.word))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("Next")])],1)},g=[],_=a("5bf2"),k={data:function(){return{word:""}},methods:{ImportClicked:function(t){console.log(t),this.$router.push({path:"/import",name:"import"})}},mounted:function(){var t=_.mnemonic();this.word=t}},w=k,x=(a("22b7"),Object(r["a"])(w,b,g,!1,null,"a85a3ad8",null));x.options.__file="Create.vue";var S=x.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("Please enter the mnemonic")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.word,expression:"word"}],domProps:{value:t.word},on:{input:function(e){e.target.composing||(t.word=e.target.value)}}}),a("mt-button",{attrs:{type:"primary"},on:{click:t.ImportClicked}},[t._v("Enter")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full"},[t._m(0),a("div",{staticStyle:{position:"absolute",left:"50%",top:"55%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[a("mt-spinner",{staticStyle:{margin:"20px auto"},attrs:{type:"fading-circle"}})],1)])])])],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",left:"50%",top:"45%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[t._v("Importing")])])])}],I=(a("28a5"),a("76a0")),T=a.n(I),P=a("5bf2"),O={data:function(){return{display:!1,word:"",private_key:"",public_key:"",wallet_public_key:"",address:""}},methods:{ImportClicked:function(t){var e=this;if(console.log(t),12!=this.word.split(" ").length)return Object(I["MessageBox"])("提示","助记词长度不正确"),!1;this.display=!0,setTimeout(function(){e.private_key=P.xPrivKey(e.word),e.public_key=P.xPubKey(e.private_key),e.wallet_public_key=P.walletPubKey(e.private_key,0),e.address=P.walletAddress(e.wallet_public_key,0,0);var t="http://150.109.57.242:6001/api/v1/account/register";e.$http.post(t,{pubkey:e.wallet_public_key},{emulateJSON:!1}).then(function(t){}).catch(function(t){});var a=window.localStorage;a.setItem("private_key",e.private_key),a.setItem("public_key",e.public_key),a.setItem("wallet_public_key",e.wallet_public_key),a.setItem("address",e.address),e.$router.push("/wallet")},2e3)}},mounted:function(){}},M=O,j=(a("96aa"),Object(r["a"])(M,C,$,!1,null,"21af5db4",null));j.options.__file="Import.vue";var E=j.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"center"},[a("span",{staticClass:"balance"},[t._v(t._s(t.balance))]),t._v(" TTT")]),a("p",{staticClass:"address"},[t._v(t._s(t.address))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.PaymentClicked}},[t._v("Transfer")]),a("p"),a("mt-button",{attrs:{type:"primary"},on:{click:t.HistoryClicked}},[t._v("History")])],1)},H=[],B=(a("5bf2"),{data:function(){return{balance:"",private_key:"",public_key:"",wallet_public_key:"",address:""}},methods:{PaymentClicked:function(t){console.log(t),this.$router.push("/payment")},HistoryClicked:function(t){this.$router.push("/history")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null==e&&(console.log("privatekey!",e),this.$router.push("/"))},mounted:function(){var t=this,e=window.localStorage;this.private_key=e.getItem("private_key"),this.public_key=e.getItem("public_key"),this.wallet_public_key=e.getItem("wallet_public_key"),this.address=e.getItem("address");var a="http://150.109.57.242:6001/api/v1/asset/balance/"+this.address+"/TTT";this.$http.get(a).then(function(e){var a=e.body;console.log("data:",a.data.stable),t.balance=(a.data.stable+a.data.pending)/1e6},function(t){})}}),A=B,D=(a("bfdf"),Object(r["a"])(A,N,H,!1,null,"109199cc",null));D.options.__file="Wallet.vue";var J=D.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{title:"Transfer"}},[a("router-link",{attrs:{slot:"left",to:"/wallet"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("Back")])],1)],1),a("mt-field",{attrs:{label:"Address",state:t.state.to_address,placeholder:"Please enter the address of the recipient"},model:{value:t.to_address,callback:function(e){t.to_address=e},expression:"to_address"}}),a("mt-field",{attrs:{label:"Amount",type:"number",state:t.state.amount,placeholder:"Please enter the amount of the transfer"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),a("mt-field",{attrs:{label:"Description",type:"textarea",placeholder:"Please enter the description of the transfer"},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),a("p",{staticClass:"text"},[t._v(t._s(t.text))]),a("mt-button",{attrs:{type:"primary"},on:{click:t.PaymentClicked}},[t._v("Transfer")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full mask"}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"full"},[t._m(0),a("div",{staticStyle:{position:"absolute",left:"50%",top:"55%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[a("mt-spinner",{staticStyle:{margin:"20px auto"},attrs:{type:"fading-circle"}})],1)])])])],1)},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"absolute",left:"50%",top:"45%"}},[a("div",{staticStyle:{position:"relative",left:"-50%",color:"#fff"}},[a("p",[t._v("Making payment")])])])}],K=a("5bf2"),q={data:function(){return{display:!1,alertMSG:"",to_address:"",private_key:"",public_key:"",wallet_public_key:"",address:"",amount:"",message:"",text:"",state:{to_address:"",amount:""}}},watch:{to_address:function(t,e){32!=t.length?this.state.to_address="error":this.state.to_address="success"},amount:function(t,e){this.state.amount=t>0?"success":"error"}},methods:{PaymentClicked:function(t){var e=this,a=this;this.display=!0,console.log(t);var n="http://150.109.57.242:6001/api/v1/asset/transfer";this.$http.post(n,{asset:"TTT",payer:this.address,message:this.message,outputs:[{address:this.to_address,amount:1e6*parseFloat(this.amount)}]},{emulateJSON:!1}).then(function(t){if(console.log("payment:",t.body),0==t.body.errMsg.indexOf("not enough asset")&&I["MessageBox"].alert("Insufficient balance!").then(function(t){e.display=!1}),"success"==t.body.errMsg){console.log("sign!!!");var n=t.body.data.b64_to_sign,o=t.body.data.txid,s=window.localStorage,r=s.getItem("private_key"),i=K.sign(n,r,"m/44'/0'/0'/0/0");console.log("sig:",i);var l="http://150.109.57.242:6001/api/v1/asset/sign";a.$http.post(l,{txid:o,sig:i},{emulateJSON:!1}).then(function(t){console.log("return:",t.body),"success"==t.body.errMsg&&(console.log("unit:",t.body.data.unit),I["MessageBox"].alert("payment successful!").then(function(t){a.$router.push("/")}))}).catch(function(t){})}}).catch(function(t){})}},mounted:function(){var t=window.localStorage;this.private_key=t.getItem("private_key"),this.address=t.getItem("address")}},G=q,L=(a("f39e"),Object(r["a"])(G,F,W,!1,null,"22e68f8a",null));L.options.__file="Payment.vue";var Y=L.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{title:"Transaction History"}},[a("router-link",{attrs:{slot:"left",to:"/wallet"},slot:"left"},[a("mt-button",{attrs:{icon:"back"}},[t._v("Back")])],1)],1),t._l(t.list,function(t){return a("div",{key:t.index,staticStyle:{"text-align":"left"}},[a("mt-cell",{attrs:{title:t.time,value:t.value}})],1)})],2)},Q=[],R=(a("ac6a"),a("5bf2"),{data:function(){return{list:[],address:""}},methods:{PaymentClicked:function(t){console.log(t),this.$router.push("/payment")},HistoryClicked:function(t){this.$router.push("/history")}},created:function(){var t=window.localStorage,e=t.getItem("private_key");null==e&&(console.log("privatekey!",e),this.$router.push("/"))},mounted:function(){var t=this,e=window.localStorage;this.address=e.getItem("address");var a="http://150.109.57.242:6001/api/v1/asset/txhistory/"+this.address+"/TTT/1/10";this.$http.get(a).then(function(e){var a=e.body;console.log("history:",a.data.history);var n=a.data.history;n.forEach(function(e){var a=e.unit,n=a.timestamp,o=new Date(1e3*n),s=o.getFullYear()+"-",r=(o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-",i=(o.getDate()<10?"0"+o.getDate():o.getDate())+" ",l=(o.getHours()<10?"0"+o.getHours():o.getHours())+":",c=(o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes())+":",u=(o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds())+"",d="+",p=0;if(a.authors[0].address===t.address){d="-";var f=a.messages[a.messages.length-1].payload.outputs;f.forEach(function(e){e.address===t.address||(p=e.amount,t.list.push({time:s+r+i+l+c+u,value:d+p/1e6}))})}else{d="+",console.log("+",a.messages[a.messages.length-1]);f=a.messages[a.messages.length-1].payload.outputs;f.forEach(function(e){e.address===t.address&&(p=e.amount,t.list.push({time:s+r+i+l+c+u,value:d+parseFloat(p/1e6)}))})}})},function(t){})}}),U=R,V=(a("411f"),Object(r["a"])(U,z,Q,!1,null,"2297e1c8",null));V.options.__file="History.vue";var X=V.exports,Z=a("9f7b");a("aa35");n["default"].use(T.a),n["default"].use(Z["a"]),n["default"].use(u["a"]),n["default"].use(d["a"]);var tt=new u["a"]({base:"/",routes:[{path:"/",name:"home",component:y},{path:"/create",name:"create",component:S},{path:"/import",name:"import",component:E},{path:"/wallet",name:"wallet",component:J},{path:"/payment",name:"payment",component:Y},{path:"/history",name:"history",component:X},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]});n["default"].config.productionTip=!1,new n["default"]({router:tt,render:function(t){return t(c)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),o=a.n(n);o.a},"5e27":function(t,e,a){},"6ebb":function(t,e,a){},"834f":function(t,e,a){},"8cec":function(t,e,a){},"96aa":function(t,e,a){"use strict";var n=a("1c0b"),o=a.n(n);o.a},a2b0:function(t,e,a){},b180:function(t,e,a){},bfdf:function(t,e,a){"use strict";var n=a("6ebb"),o=a.n(n);o.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.ed31fa1f.png"},e553:function(t,e,a){"use strict";var n=a("8cec"),o=a.n(n);o.a},f39e:function(t,e,a){"use strict";var n=a("b180"),o=a.n(n);o.a}});
//# sourceMappingURL=app.06fbbf83.js.map